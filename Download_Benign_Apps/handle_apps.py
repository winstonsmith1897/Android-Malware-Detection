import extract_downloader_links

file = open('retrieved_apps.txt', 'r')

lines = file.readlines()

Ids = []
for line in lines:
	try:
		if "title" in line:
			title = line.split("title: '", 1)[1].split("',")[0].replace(' ', '-')
			title = title.lower()


		if "appId: '" in line:
			#print('APP_ID: ' + line.split("appId: '", 1)[1].split("',")[0])
			Id = line.split("appId: '", 1)[1].split("',")[0]
			Ids.append((title, Id))	
	except IndexError:
		print('Total Number of Apps Reached')

out = open('links.txt', 'a')
for title, id in Ids:
	try:
		link = extract_downloader_links.extract(title, id)
		print(str(link).replace('None', ''))
		ok = out.write(str(link).replace('None', ''))
	except IndexError:
		pass

out.close()
